plugins {
  id 'base'
  id 'net.researchgate.release' version '2.4.0'
}

description = 'A trivial Gradle build'

release {
  failOnCommitNeeded = false
  failOnUpdateNeeded = false

  git {
    requireBranch = 'develop'
    pushToRemote = 'origin'
  }
}


task destDir {
  doLast {
    mkdir('dest')
  }
}

task copy(dependsOn: destDir, type: Copy) {
  from 'app'
  into 'dest'

  doLast {
    copy {
      from 'gradle.properties'
      into 'dest'
      rename ('gradle.properties', 'VERSION.txt')
    }
  }
}


task zip(dependsOn: copy, type: Tar) {
  from 'dest'
  baseName = 'aim-auto-build-tool'
  compression = Compression.GZIP
}

